<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shoikot Payment Tracker</title>
  <style>
    :root{--bg:#f6f7fb;--card:#fff;--muted:#556;--accent:#0ea5a4;--danger:#ef4444}
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans',sans-serif;background:var(--bg);margin:0;color:#0f172a}
    .wrap{max-width:1100px;margin:20px auto;padding:16px}
    .card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(12,15,30,0.06);}
    h1{font-size:18px;margin:0}
    .grid{display:grid;gap:12px}
    .cols-2{grid-template-columns:1fr 1fr}
    @media (max-width:860px){.cols-2{grid-template-columns:1fr}}
    input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #e6e9ef;font-size:14px}
    .flex{display:flex;gap:8px;align-items:center}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:white;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid #e6e9ef;color:var(--muted)}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;text-align:left;border-bottom:1px solid #eef2f6;font-size:14px}
    .muted{color:var(--muted)}
    .small{font-size:13px;padding:6px 8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Shoikot Payment Tracker</h1>
    <div class="muted" style="margin-bottom:12px">Client payments & tracking — Local data saved in browser</div>

   <button class="btn" onclick="window.location.href='index.html'">
  Back to Home
</button>

    <div class="card">
      <div class="grid cols-2">
        <div>
          <input id="clientName" placeholder="Client name" />
          <input id="clientPhone" placeholder="Phone (optional)" style="margin-top:8px" />
          <input id="service" placeholder="Service (e.g., Facebook Ad)" style="margin-top:8px" />
        </div>
        <div>
          <div style="display:grid;grid-template-columns:1fr 120px;gap:8px">
            <input id="amount" placeholder="Amount" type="number" />
            <select id="currency"><option value="BDT">BDT</option><option value="USD">USD</option></select>
          </div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px">
            <input id="date" type="date" />
            <select id="status"><option value="Unpaid">Unpaid</option><option value="Paid">Paid</option><option value="Endorsed Pending">Endorsed Pending</option><option value="Endorsed Done">Endorsed Done</option></select>
          </div>
          <textarea id="remarks" rows="2" placeholder="Remarks" style="margin-top:8px"></textarea>
          <div style="display:flex;justify-content:space-between;margin-top:8px">
            <div class="muted small">ID: <span id="entryId">—</span></div>
            <div>
              <button class="btn" id="saveBtn">Save</button>
              <button class="btn ghost" id="resetBtn">Reset</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div style="height:12px"></div>
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <div><strong>Entries</strong></div>
        <div class="muted">Actions: mark paid, toggle endorsed, edit, delete</div>
      </div>
      <div style="overflow:auto">
        <table id="table"><thead><tr><th>Client</th><th>Service</th><th>Amount</th><th>Date</th><th>Status</th><th>Remarks</th><th>Action</th></tr></thead><tbody id="tbody"></tbody></table>
      </div>
    </div>

  </div>

  <script>
    const TKEY = 'clientPayments_v1'
    let entries = JSON.parse(localStorage.getItem(TKEY) || '[]')
    const tEls = {
      tbody: document.getElementById('tbody'),
      clientName: document.getElementById('clientName'),
      clientPhone: document.getElementById('clientPhone'),
      service: document.getElementById('service'),
      amount: document.getElementById('amount'),
      currency: document.getElementById('currency'),
      date: document.getElementById('date'),
      status: document.getElementById('status'),
      remarks: document.getElementById('remarks'),
      entryId: document.getElementById('entryId'),
      saveBtn: document.getElementById('saveBtn'),
      resetBtn: document.getElementById('resetBtn')
    }
    let editId = null
    function uid(){return Date.now().toString(36)+Math.random().toString(36).slice(2,7)}
    function saveToStorage(){localStorage.setItem(TKEY, JSON.stringify(entries))}
    function resetForm(){
      tEls.clientName.value='';tEls.clientPhone.value='';tEls.service.value='';tEls.amount.value='';tEls.currency.value='BDT';tEls.date.value='';tEls.status.value='Unpaid';tEls.remarks.value='';tEls.entryId.textContent='—';editId=null;tEls.saveBtn.textContent='Save'
    }
    function addOrUpdate(){
      const name=tEls.clientName.value.trim();
      if(!name){alert('Client name lagbe');return}
      const obj={id: editId || uid(), name, phone: tEls.clientPhone.value.trim(), service: tEls.service.value.trim(), amount: parseFloat(tEls.amount.value || '0'), currency: tEls.currency.value, date: tEls.date.value || new Date().toISOString().slice(0,10), status: tEls.status.value, remarks: tEls.remarks.value.trim()}
      if(editId){entries = entries.map(e=>e.id===editId?obj:e)} else entries.unshift(obj)
      saveToStorage();resetForm();render()
    }
    function render(){tEls.tbody.innerHTML=''; for(const e of entries){
      const tr=document.createElement('tr')
      tr.innerHTML = `<td><strong>${escapeHtml(e.name)}</strong><div class="muted small">${escapeHtml(e.phone||'')}</div></td><td>${escapeHtml(e.service||'')}</td><td>${formatAmount(e.amount)} ${e.currency}</td><td class="muted">${e.date}</td><td>${e.status}</td><td>${escapeHtml(e.remarks||'')}</td><td><div style="display:flex;gap:6px"><button class="small btn" onclick="markPaid('${e.id}')">Paid</button><button class="small btn ghost" onclick="toggleEndorse('${e.id}')">Toggle Endorse</button><button class="small btn ghost" onclick="editEntry('${e.id}')">Edit</button><button class="small" style="background:var(--danger);color:white;border-radius:8px;padding:6px 8px" onclick="deleteEntry('${e.id}')">Del</button></div></td>`
      tEls.tbody.appendChild(tr)
    }}
    function formatAmount(n){return Number(n||0).toLocaleString('en-US',{maximumFractionDigits:2})}
    function escapeHtml(s){if(!s) return ''; return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;')}
    function markPaid(id){entries = entries.map(e=>e.id===id?{...e,status:'Paid'}:e); saveToStorage();render()}
    function toggleEndorse(id){entries = entries.map(e=>{if(e.id!==id) return e; const next = e.status==='Endorsed Done'? 'Paid' : 'Endorsed Done'; return {...e,status:next}}); saveToStorage();render()}
    function editEntry(id){const e = entries.find(x=>x.id===id); if(!e) return; editId = id; tEls.entryId.textContent = id; tEls.clientName.value = e.name; tEls.clientPhone.value = e.phone; tEls.service.value = e.service; tEls.amount.value = e.amount; tEls.currency.value = e.currency; tEls.date.value = e.date; tEls.status.value = e.status; tEls.remarks.value = e.remarks; tEls.saveBtn.textContent = 'Update'; window.scrollTo({top:0,behavior:'smooth'})}
    function deleteEntry(id){if(!confirm('Delete this entry?')) return; entries = entries.filter(e=>e.id!==id); saveToStorage(); render()}
    tEls.saveBtn.addEventListener('click',addOrUpdate)
    tEls.resetBtn.addEventListener('click',resetForm)
    render()

    // Expose functions for inline onclicks
    window.markPaid = markPaid
    window.toggleEndorse = toggleEndorse
    window.editEntry = editEntry
    window.deleteEntry = deleteEntry
  </script>
</body>
</html>

